<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Heart to Heart | ISA Chulalongkorn</title>

  <style>
    /* Softer + elegant + whimsical (Alice-ish) */
    @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,600&family=Fraunces:opsz,wght@9..144,400;9..144,600&family=Parisienne&display=swap');

    :root{
      --ink:#2b2a33;
      --blush:#f3d9df;
      --sky:#d9e7f5;
      --sage:#dfece5;

      --garden:#2b4a3d;
      --leaf:#3e6b55;

      --gold:#c8a35a;
      --gold2:#f0d9a6;

      --shadow: 0 24px 60px rgba(30, 26, 40, .22);
      --hairline: rgba(200,163,90,.55);

      --red:#b11f2c;      /* ไพ่แดง */
      --black:#1f232b;    /* ไพ่ดำ */
    }

    *{ box-sizing:border-box; }
    html,body{ width:100%; height:100%; margin:0; }

    body{
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:"Cormorant Garamond", serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(217,231,245,.85) 0%, rgba(217,231,245,0) 55%),
        radial-gradient(1000px 700px at 80% 20%, rgba(243,217,223,.75) 0%, rgba(243,217,223,0) 55%),
        radial-gradient(900px 650px at 50% 90%, rgba(223,236,229,.75) 0%, rgba(223,236,229,0) 55%),
        linear-gradient(180deg, #f9f5ee 0%, #f2ebe1 100%);
      overflow:hidden;
      position:relative;
    }

    /* soft “storybook shimmer” */
    body::before{
      content:"";
      position:fixed;
      inset:-20%;
      pointer-events:none;
      background:
        repeating-linear-gradient(
          115deg,
          rgba(255,255,255,.09) 0px,
          rgba(255,255,255,.09) 12px,
          rgba(255,255,255,0) 24px,
          rgba(255,255,255,0) 48px
        );
      opacity:.55;
      transform:rotate(-6deg);
      filter: blur(.7px);
    }

    body::after{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(260px 180px at 0% 0%, rgba(62,107,85,.18), transparent 70%),
        radial-gradient(260px 180px at 100% 0%, rgba(62,107,85,.14), transparent 70%),
        radial-gradient(260px 180px at 0% 100%, rgba(62,107,85,.14), transparent 70%),
        radial-gradient(260px 180px at 100% 100%, rgba(62,107,85,.18), transparent 70%);
      opacity:.8;
      mix-blend-mode:multiply;
    }

    /* =========================
       BALLOON BACKGROUND (ลูกโป่ง)
       ========================= */
    #balloons{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }

    .balloon{
      position:absolute;
      left:0; top:0;
      width: 26px;
      height: 34px;
      opacity: 0;
      will-change: transform, opacity;
      animation: floatBalloon var(--dur, 5s) ease-out forwards;
      filter: drop-shadow(0 8px 14px rgba(30,26,40,.12));
    }

    /* balloon body */
    .balloon::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius: 50% 50% 48% 48%;
      background: var(--c, rgba(240,217,166,.9));
      box-shadow:
        inset -6px -10px 16px rgba(0,0,0,.12),
        inset  6px  10px 18px rgba(255,255,255,.35);
    }
    /* highlight */
    .balloon::after{
      content:"";
      position:absolute;
      left: 22%;
      top: 18%;
      width: 34%;
      height: 44%;
      border-radius: 999px;
      background: rgba(255,255,255,.33);
      transform: rotate(-18deg);
      filter: blur(.2px);
    }

    /* knot */
    .knot{
      position:absolute;
      left:50%;
      bottom:-5px;
      transform: translateX(-50%) rotate(45deg);
      width: 8px;
      height: 8px;
      background: rgba(0,0,0,.08);
      border-radius: 2px;
      opacity:.75;
      mix-blend-mode:multiply;
      pointer-events:none;
    }

    /* string */
    .string{
      position:absolute;
      left:50%;
      bottom:-68px;
      transform: translateX(-50%);
      width:1px;
      height:66px;
      background: linear-gradient(180deg, rgba(43,42,51,.35), rgba(43,42,51,0));
      opacity:.55;
      pointer-events:none;
    }

    @keyframes floatBalloon{
      0%{
        opacity: 0;
        transform: translate(var(--x, 0px), var(--y0, 20px)) scale(var(--s, 1)) rotate(var(--r0, -6deg));
      }
      10%{ opacity: .75; }
      65%{ opacity: .55; }
      100%{
        opacity: 0;
        transform: translate(calc(var(--x, 0px) + var(--drift, 30px)), var(--y1, -240px)) scale(calc(var(--s, 1) * 1.05)) rotate(var(--r1, 10deg));
      }
    }

    @media (prefers-reduced-motion: reduce){
      #balloons{ display:none; }
    }

    /* =========================
       CARD (paper)
       ========================= */
    .manuscript{
      width:min(560px, 92vw);
      padding:44px 36px 40px;
      background:rgba(255,255,255,.86);
      border-radius:28px;
      box-shadow:var(--shadow);
      position:relative;
      text-align:center;
      overflow:hidden;
      backdrop-filter: blur(6px);
      z-index:1; /* above balloons */
    }

    .manuscript::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(420px 240px at 20% 20%, rgba(62,107,85,.10), transparent 60%),
        radial-gradient(380px 220px at 80% 30%, rgba(200,163,90,.10), transparent 60%),
        radial-gradient(520px 260px at 50% 110%, rgba(62,107,85,.08), transparent 60%),
        repeating-linear-gradient(0deg, rgba(43,42,51,.02) 0px, rgba(43,42,51,.02) 1px, transparent 2px, transparent 7px);
      opacity:.65;
      mix-blend-mode:multiply;
    }

    .frame{
      position:absolute;
      inset:14px;
      border-radius:22px;
      border:1px solid var(--hairline);
      pointer-events:none;
    }
    .frame::after{
      content:"";
      position:absolute;
      inset:10px;
      border-radius:18px;
      border:1px solid rgba(62,107,85,.14);
    }

    /* =========================
       ALICE-ISH CARD CORNERS (โพแดง/ข้าวหลามตัด/ดอกจิก/โพดำ)
       ========================= */
    .corner{
      position:absolute;
      width:72px;
      height:72px;
      border-radius:18px;
      border:1px solid rgba(200,163,90,.35);
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.55) 0 10px, transparent 22px),
        linear-gradient(135deg, rgba(255,255,255,.55), rgba(255,255,255,.20));
      box-shadow:
        0 12px 24px rgba(30,26,40,.10),
        inset 0 0 0 1px rgba(62,107,85,.10);
      pointer-events:none;
      z-index:1;
      display:grid;
      place-items:center;
      overflow:hidden;
    }

    /* tiny “playing-card” inner border */
    .corner::before{
      content:"";
      position:absolute;
      inset:10px;
      border-radius:14px;
      border:1px solid rgba(31,35,43,.12);
      opacity:.9;
    }

    .corner span{
      font-size:26px;
      line-height:1;
      text-shadow: 0 1px 0 rgba(255,255,255,.6);
      transform: rotate(-8deg);
    }

    .c1{ top:10px; left:10px; }
    .c2{ top:10px; right:10px; }
    .c3{ bottom:10px; left:10px; }
    .c4{ bottom:10px; right:10px; }

    .welcome{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      margin-bottom:14px;
      position:relative;
      z-index:1;
    }
    .welcome .line{
      height:1px;
      width: clamp(34px, 10vw, 72px);
      background:linear-gradient(90deg, transparent, var(--gold), transparent);
      opacity:.9;
    }
    .welcome .text{
      font-style:italic;
      font-size:16px;
      color: rgba(43,42,51,.70);
      line-height:1.25;
    }
    .welcome .text strong{
      font-family:"Fraunces", serif;
      font-weight:600;
      letter-spacing:.06em;
      color:var(--gold);
      font-style:normal;
    }

    h1{
      font-family:"Fraunces", serif;
      font-weight:600;
      letter-spacing:.03em;
      margin:0;
      color: rgba(43,42,51,.92);
      position:relative;
      z-index:1;
      font-size: clamp(26px, 5.2vw, 36px);
    }

    .divider{
      height:1px;
      width:70%;
      margin:18px auto;
      background:linear-gradient(90deg, transparent, var(--gold), transparent);
      position:relative;
      z-index:1;
    }

    .label{
      font-style:italic;
      margin-top:6px;
      font-size:18px;
      color: rgba(43,74,61,.82);
      position:relative;
      z-index:1;
    }

    .val{
      font-family:"Fraunces", serif;
      font-size: clamp(64px, 10vw, 86px);
      font-weight:600;
      background:linear-gradient(180deg, var(--gold2), var(--gold));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      margin:8px 0 6px;
      position:relative;
      z-index:1;
    }

    .target{
      margin: 10px auto 22px;
      font-size:16px;
      letter-spacing:.02em;
      text-transform:none;
      color: rgba(43,42,51,.74);
      max-width: 44ch;
      line-height:1.35;
      position:relative;
      z-index:1;
    }
    .target strong{ color:var(--gold); font-weight:600; }

    .field{
      margin-bottom:14px;
      text-align:left;
      position:relative;
      z-index:1;
    }
    label{
      font-size:12px;
      letter-spacing:.10em;
      text-transform:uppercase;
      color: rgba(43,42,51,.62);
      padding-left:6px;
      display:block;
      margin-bottom:6px;
    }
    input{
      width:100%;
      padding:12px 14px;
      border-radius:16px;
      border:1px solid rgba(200,163,90,.28);
      background:rgba(255,255,255,.68);
      font-family:"Cormorant Garamond", serif;
      font-size:18px;
      outline:none;
      transition: .2s ease;
      box-shadow: 0 10px 22px rgba(30,26,40,.06);
    }
    input:focus{
      border-color: rgba(62,107,85,.30);
      box-shadow: 0 0 0 4px rgba(62,107,85,.10), 0 14px 30px rgba(30,26,40,.10);
    }

    button{
      width:100%;
      margin-top:10px;
      padding:14px;
      border:none;
      border-radius:999px;
      font-family:"Fraunces", serif;
      font-weight:600;
      letter-spacing:.08em;
      text-transform:none;
      background:
        radial-gradient(220px 120px at 30% 30%, rgba(255,255,255,.55), transparent 60%),
        linear-gradient(180deg, var(--gold2), var(--gold));
      color:#2b2a33;
      cursor:pointer;
      box-shadow:0 16px 34px rgba(30,26,40,.18);
      transition: transform .18s ease, filter .18s ease;
      position:relative;
      z-index:1;
    }
    button:hover{ transform: translateY(-1px); filter: brightness(1.02); }
    button:active{ transform: translateY(0px) scale(.99); }

    #overlay{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(10,14,20,.62);
      backdrop-filter:blur(10px);
      padding: 20px;
      z-index:10;
    }

    .reveal{
      background:rgba(255,255,255,.92);
      padding:44px;
      border-radius:28px;
      text-align:center;
      width:min(680px,92vw);
      box-shadow:0 34px 80px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
    }
    .reveal::before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(420px 240px at 20% 20%, rgba(62,107,85,.10), transparent 60%),
        radial-gradient(380px 220px at 80% 30%, rgba(200,163,90,.10), transparent 60%);
      opacity:.7;
    }

    .reveal h2{
      font-family:"Parisienne", cursive;
      font-size:56px;
      color:var(--gold);
      margin:10px 0;
      position:relative;
      z-index:1;
    }
    .reveal p, .reveal h1, .reveal button{ position:relative; z-index:1; }

    @media (max-width: 380px){
      .manuscript{ padding:40px 22px 34px; }
      .corner{ width:66px; height:66px; }
      .corner span{ font-size:24px; }
    }
  </style>
</head>

<body>
  <!-- balloon layer -->
  <div id="balloons" aria-hidden="true"></div>

  <div class="manuscript">
    <div class="frame"></div>

    <!-- card-suit corners -->
    <div class="corner c1"><span style="color:var(--red)">♥</span></div>
    <div class="corner c2"><span style="color:var(--black)">♠</span></div>
    <div class="corner c3"><span style="color:var(--red)">♦</span></div>
    <div class="corner c4"><span style="color:var(--black)">♣</span></div>

    <div class="welcome">
      <span class="line"></span>
      <div class="text">
        <strong>ISA Chulalongkorn</strong>
      </div>
      <span class="line"></span>
    </div>

    <h1>Heart to Heart</h1>
    <div class="divider"></div>

    <div class="label">Your Number</div>
    <div class="val" id="my-num">--</div>

    <div class="target">
      Find a companion whose number brings yours to <strong id="target-num">110</strong>
    </div>

    <div class="field">
      <label for="partner-val">Your Companion’s Number</label>
      <input type="number" id="partner-val" placeholder="Enter number" />
    </div>

    <div class="field">
      <label for="host-key">The Key</label>
      <input type="password" id="host-key" placeholder="Enter key" autocomplete="off" />
    </div>

    <button type="button" onclick="attemptBond()">Join Heart</button>
  </div>

  <div id="overlay">
    <div class="reveal">
      <h1>Bloomed</h1>
      <div class="divider"></div>
      <p>Your hearts meet in harmony</p>
      <h2 id="team-name">The Golden Garden</h2>
      <button type="button" onclick="location.reload()">Return</button>
    </div>
  </div>

  <script>
    const SECRET_KEY = "heart to heart";
    const targets = [100, 110, 120];
    const teamNames = [
      "The Rose Conservatory",
      "The Lavender Gallery",
      "The Golden Trellis",
      "The Ivory Pavilion"
    ];

    const myValue = Math.floor(Math.random() * 60) + 20;
    const myTarget = targets[Math.floor(Math.random() * targets.length)];

    document.getElementById("my-num").innerText = myValue;
    document.getElementById("target-num").innerText = myTarget;

    function attemptBond(){
      const partnerVal = parseInt(document.getElementById("partner-val").value, 10);
      const userKey = (document.getElementById("host-key").value || "").toLowerCase().trim();
      const sum = myValue + partnerVal;

      if(Number.isNaN(partnerVal)){
        alert("Please enter your companion’s number first.");
        return;
      }

      if(sum === myTarget && userKey === SECRET_KEY){
        document.getElementById("team-name").innerText =
          teamNames[Math.floor(Math.random()*teamNames.length)];
        document.getElementById("overlay").style.display="flex";
      }else if(sum === myTarget){
        alert("Your numbers align beautifully. Please enter the key to join heart.");
      }else{
        alert("Not quite yet — keep searching for the perfect companion.");
      }
    }

    /* =========================
       BALLOON ENGINE (ลูกโป่งลอย)
       ========================= */
    const balloonsLayer = document.getElementById("balloons");

    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnBalloon(){
      const el = document.createElement("div");
      el.className = "balloon";

      const knot = document.createElement("div");
      knot.className = "knot";
      const string = document.createElement("div");
      string.className = "string";
      el.appendChild(knot);
      el.appendChild(string);

      const vw = window.innerWidth;
      const vh = window.innerHeight;

      // start near bottom, random x
      const startX = rand(0.06, 0.94) * vw;
      const startY = vh + rand(20, 80);

      // float up w drift
      const drift = rand(-90, 90);
      const dur = rand(4.2, 6.6);      // seconds
      const scale = rand(0.75, 1.55);
      const r0 = rand(-10, -2);
      const r1 = rand(6, 14);

      // pastel balloon colors
      const colors = [
        "rgba(240,217,166,.92)",  // gold
        "rgba(243,217,223,.92)",  // blush
        "rgba(217,231,245,.92)",  // sky
        "rgba(223,236,229,.92)",  // sage
        "rgba(200,163,90,.88)"    // deeper gold
      ];
      el.style.setProperty("--c", colors[Math.floor(Math.random()*colors.length)]);

      el.style.left = startX + "px";
      el.style.top  = startY + "px";

      el.style.setProperty("--x", "0px");
      el.style.setProperty("--y0", "0px");
      el.style.setProperty("--y1", (-rand(220, 360)) + "px");
      el.style.setProperty("--drift", drift + "px");
      el.style.setProperty("--dur", dur + "s");
      el.style.setProperty("--s", scale);
      el.style.setProperty("--r0", r0 + "deg");
      el.style.setProperty("--r1", r1 + "deg");

      balloonsLayer.appendChild(el);
      el.addEventListener("animationend", () => el.remove());
    }

    let balloonTimer = null;
    function startBalloons(){
      if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
      if (balloonTimer) return;

      // small opening burst
      for(let i=0;i<6;i++){
        setTimeout(spawnBalloon, i * 160);
      }

      // subtle ongoing
      balloonTimer = setInterval(() => {
        spawnBalloon();
        if (Math.random() < 0.28) spawnBalloon();
      }, 650);
    }

    startBalloons();
    window.addEventListener("visibilitychange", () => {
      if (document.hidden){
        clearInterval(balloonTimer);
        balloonTimer = null;
      } else {
        startBalloons();
      }
    });
  </script>
</body>
</html>
